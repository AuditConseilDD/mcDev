@model IEnumerable<MCSolutions.DataAccess.CRA>

@{
    ViewBag.Title = "Consultant";
}




@*<div class="content-gradient"></div>*@
<div class="container-fluid main-content">
    <main role="main" class="container">
        <div class="content-spacer"></div>
        <div class="row">
            <div class="col-md-3">
                <div class="side-nav">
                    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                        <a class="nav-link  active" href="@Url.Action("Admin", "CRA")">Mon administratif<div class="status"><div class="side-nav-pill-success"></div></div></a>
                        <a class="nav-link " href="@Url.Action("Param", "CRA")">Paramétrage<div class="status"><div class="side-nav-pill-warning"></div></div></a>
                    </div>
                </div>
            </div>
            <div class="col-md-9">
                <div class="content-box">
                    <div class="row justify-content-between">
                        <div class="col-auto"><h2 class="page-title">Mon administratif</h2></div>
                        <div class="col-auto"><button type="button" data-toggle="modal" data-target="#exampleModal" class="btn btn-primary page-title">Saisir un CRA</button></div>
                    </div>
                    <div class="content-separator"></div>
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Mois</th>
                                <th scope="col">Nb jours</th>
                                <th scope="col">Client final</th>
                                <th scope="col">Responsable</th>
                                <th scope="col">Statut</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td> @Html.DisplayFor(modelItem => item.MOIS)</td>
                                    <td>@Html.DisplayFor(modelItem => item.NBTOTALJOURS)</td>
                                    <td>@Html.DisplayFor(modelItem => item.LIB_CLIENT)</td>
                                    <td>@Html.DisplayFor(modelItem => item.LIB_RESPONSABLE)</td>
                                    <td>@Html.DisplayFor(modelItem => item.FK_IDSTATUT)</td>
                                    <td>
                                        <div class="dropdown">
                                            <button class="btn btn-primary" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <span class="oi oi-menu"></span>
                                            </button>
                                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                <a class="dropdown-item" href="#">Afficher ce CRA</a>
                                                <a class="dropdown-item" href="#">Transmettre pour signature</a>
                                                <a class="dropdown-item" href="#">Supprimer ce CRA</a>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            }
                            @*<tr>
                                <td>2018/03</td>
                                <td>14</td>
                                <td>VEOLIA</td>
                                <td>Sebastien DC</td>
                                <td>CRA à saisir</td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-primary" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <span class="oi oi-menu"></span>
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">Afficher ce CRA</a>
                                            <a class="dropdown-item" href="#">Transmettre pour signature</a>
                                            <a class="dropdown-item" href="#">Supprimer ce CRA</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>2018/02</td>
                                <td>14</td>
                                <td>VEOLIA</td>
                                <td>Sebastien DC</td>
                                <td>En attente validation</td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-primary" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <span class="oi oi-menu"></span>
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">Afficher ce CRA</a>
                                            <a class="dropdown-item" href="#">Transmettre pour signature</a>
                                            <a class="dropdown-item" href="#">Supprimer ce CRA</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>2018/02</td>
                                <td>14</td>
                                <td>VEOLIA</td>
                                <td>Sebastien DC</td>
                                <td>En attente Confirmation</td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-primary" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <span class="oi oi-menu"></span>
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">Afficher ce CRA</a>
                                            <a class="dropdown-item" href="#">Transmettre pour signature</a>
                                            <a class="dropdown-item" href="#">Supprimer ce CRA</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>2018/02</td>
                                <td>14</td>
                                <td>VEOLIA</td>
                                <td>Sebastien DC</td>
                                <td>Validée</td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-primary" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <span class="oi oi-menu"></span>
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">Afficher ce CRA</a>
                                            <a class="dropdown-item" href="#">Transmettre pour signature</a>
                                            <a class="dropdown-item" href="#">Supprimer ce CRA</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>2018/01</td>
                                <td>14</td>
                                <td>VEOLIA</td>
                                <td>Sebastien DC</td>
                                <td>CRA à saisir</td>
                                <td>
                                    <div class="dropdown">
                                        <button class="btn btn-primary" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <span class="oi oi-menu"></span>
                                        </button>
                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                            <a class="dropdown-item" href="#">Afficher ce CRA</a>
                                            <a class="dropdown-item" href="#">Transmettre pour signature</a>
                                            <a class="dropdown-item" href="#">Supprimer ce CRA</a>
                                        </div>
                                    </div>
                                </td>
                            </tr>*@
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main><!-- /.container -->
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content content-dialog">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Saisir un CRA</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="exampleFormControlSelect1">Sélectionner le client pour lequel créer un CRA</label>
                        <select class="form-control" id="exampleFormControlSelect1">
                            <option>Sébastien De Caumes Web Edia</option>
                            <option>Sébastien De Caumes Web Edia</option>
                            <option>Sébastien De Caumes Web Edia</option>
                            <option>Sébastien De Caumes Web Edia</option>
                            <option>Sébastien De Caumes Web Edia</option>
                        </select>
                    </div>

                    @*<table>
                        <tr>
                            <td><select id="yearSelect" class="year form-control form-control-xs"><option value="0">---</option></select></td>
                            <td><select id="monthSelect" class="month form-control form-control-xs" disabled><option value="0">---</option></select></td>
                        <tr>
                    </table>*@

                </form>
            </div>
            <div class="modal-footer">
                <div class="row justify-content-around">
                    <a id="craCreate" href="./saisir-cra.html" class="col-md-auto btn-custom-primary">Créer un CRA</a>
                    <button type="button" class="col-md-auto btn-custom-primary">Inviter un nouveau client</button>
                </div>
            </div>
        </div>
    </div>
</div>



@section Scripts{


    <script src="~/assets/scripts/main.70255159a2dbf7e3e589.js"></script>

    <script>

        var minOffset = 0, maxOffset = 10; //100; // Change to whatever you want // minOffset = 0 for current year
        var thisYear = (new Date()).getFullYear();
        //var m_names = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
        var m_names = ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Jui', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Decembre'];
        var month = 0   // month = (new Date()).getMonth(); // for cuurent month
        for (var j = month; j <= 11; j++) { var months = m_names[0 + j]/*.slice(0, 3)*/; $('<option>', { value: (j + 1), text: months }).appendTo(".month"); }
        for (var i = minOffset; i <= maxOffset; i++) { var year = thisYear - i; $('<option>', { value: year, text: year }).appendTo(".year"); }

        $(document).ready(function () {
            //$('#yearSelect').val("0");

            $('#yearSelect').change(function () {
                selectVal = $(this).val(); //$('#yearSelect').val();

                if (selectVal == 0) {
                    $('#monthSelect').prop("disabled", true);
                }
                else {
                    $('#monthSelect').prop("disabled", false);
                }
            });

            $('#monthSelect').change(function () {
                selectVal = $(this).val();  //$('#monthSelect').val();

                yearVal = $('#yearSelect').val();

                if (selectVal == 0 || yearVal == 0) {
                    $('#craCreate').attr('class', 'disabled');
                }
                else {
                    $('#craCreate').attr('class', 'col-md-auto btn-custom-primary enabled');
                }
            });
        });

    </script>
}

