@model MCSolutions.DataAccess.CRA

@{
    ViewBag.Title = "Details";
}



<div class="container-fluid main-content">
    <main role="main" class="container">
        <div class="content-spacer"></div>
        <div class="row">
            <div class="col-md-3">
                <div class="side-nav">
                    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                        <a class="nav-link  active" href="@Url.Action("Admin", "CRA")">Mon administratif<div class="status"><div class="side-nav-pill-success"></div></div></a>
                        <a class="nav-link " href="@Url.Action("Param", "CRA")">Paramétrage<div class="status"><div class="side-nav-pill-warning"></div></div></a>
                    </div>
                </div>
            </div>
            <div class="col-md-9">
                <div class="content-box">
                    <div class="row justify-content-between">
                        <div class="col-auto"><h2 class="page-title">Mon administratif</h2></div>
                        <div class="col-auto">
                            <button type="button" data-toggle="modal" data-target="#exampleModal" class="btn btn-primary page-title">Saisir un CRA</button>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal" >Créer un CRA</button><br /><br />
                        </div>
                    </div>
                    <div class="content-separator"></div>
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Mois</th>
                                <th scope="col">Nb jours</th>
                                <th scope="col">Client final</th>
                                <th scope="col">Responsable</th>
                                <th scope="col">Statut</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody class="tbody"></tbody>
                    </table>
                </div>

                @*<a class="dropdown-item" href="@Url.Action("SaisirCRA", "CRA", new { idCRA = 1})">Afficher ce CRAZZk</a>*@
            </div>
        </div>
    </main><!-- /.container -->
</div>

@*<h2>Employees Record</h2>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal" onclick="clearTextBox();">Add New Employee</button><br /><br />
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th scope="col">Mois</th>
                <th scope="col">Nb jours</th>
                <th scope="col">Client final</th>
                <th scope="col">Responsable</th>
                <th scope="col">Statut</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody class="tbody"></tbody>
    </table>*@
@*</div>*@
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content content-dialog">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Créer un CRA</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="CRAId">ID</label>
                        <input type="text" class="form-control" id="CRAId" placeholder="Id" disabled="disabled" />
                    </div>

                    <div class="form-group">
                        <label for="TypeAct">Type d'activité</label>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <select class="form-control TypeActList" id="option-startView" name="startView"></select>
                            </li>
                        </ul>

                    </div>

                    <div class="form-group">

                        <label for="MOIS">Mois</label>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <table>
                                    <tr>
                                        <td><select id="yearSelect" class="year form-control form-control-xs"><option value="0">---</option></select></td>
                                        <td><select id="monthSelect" class="month form-control form-control-xs" disabled><option value="0">---</option></select></td>
                                    <tr>
                                </table>
                                <input type="text" class="form-control" id="MOIS" placeholder="Mois" hidden />
                            </li>
                        </ul>
                    </div>
                    <div class="form-group">
                        <label for="PeriodBeginEnd">Période</label>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <label for="MOIS">Date de début de période</label>
                                <input type="date" id="PeriodBegin" name="trip-start" class="form-control docs-date" min="2018-01-01" max="3018-01-01" size="8">
                            </li>
                            <li class="list-group-item">
                                <label for="MOIS">Date de fin de période</label>
                                <input type="date" id="PeriodEnd" name="trip-start" class="form-control docs-date" min="2018-01-01" max="3018-01-01" size="8">
                            </li>
                        </ul>

                        @*<label for="LIB_CLIENT">Client Final</label>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <input type="text" class="form-control" id="LIB_CLIENT" placeholder="Client Final" />
                            </li>
                        </ul>*@
                    </div>
                    @*<div class="form-group">
                        <label for="LIB_RESPONSABLE">Responsable</label>
                        <ul class="list-group">
                            <li class="list-group-item">
                                <input type="text" class="form-control" id="LIB_RESPONSABLE" placeholder="Responsable" />
                            </li>
                        </ul>
                    </div>*@
                </form>
            </div>
            <div class="modal-footer">
                @*<button class="button-secondary lsm-button" onclick="return addCategory()">Add Category</button>*@
                <button type="button" class="btn btn-primary" id="btnAdd" onclick="return Add();" disabled>Créer</button>
                <button type="button" class="btn btn-primary" id="btnUpdate" style="display:none;" onclick="Update();">Mettre à jour</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content content-dialog">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Saisir un CRA</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="exampleFormControlSelect1">Sélectionner le client pour lequel créer un CRA</label>
                        <select class="form-control" id="exampleFormControlSelect1">
                            <option>Sébastien De Caumes Web Edia</option>
                            <option>Sébastien De Caumes Web Edia</option>
                            <option>Sébastien De Caumes Web Edia</option>
                            <option>Sébastien De Caumes Web Edia</option>
                            <option>Sébastien De Caumes Web Edia</option>
                        </select>
                    </div>

                    @*<table>
                            <tr>
                                <td><select id="yearSelect" class="year form-control form-control-xs"><option value="0">---</option></select></td>
                                <td><select id="monthSelect" class="month form-control form-control-xs" disabled><option value="0">---</option></select></td>
                            <tr>
                        </table>*@

                </form>
            </div>
            <div class="modal-footer">
                <div class="row justify-content-around">
                    <a id="craCreate" href="@Url.Action("Add", "CRA", new { pid = "7624534" })" class="col-md-auto btn-custom-primary">Créer un CRA</a>
                    @*<a id="craCreate" onclick="return Add();" class="col-md-auto btn-custom-primary">Créer un CRA</a>*@
                    <button type="button" class="col-md-auto btn-custom-primary">Inviter un nouveau client</button>
                </div>
            </div>
        </div>
    </div>
</div>



@section Scripts{



    <script src="~/Scripts/site/cra.js"></script>
    <script src="~/assets/scripts/main.70255159a2dbf7e3e589.js"></script>

    <script>

        var minOffset = 0, maxOffset = 10; //100; // Change to whatever you want // minOffset = 0 for current year
        var thisYear = (new Date()).getFullYear();
        //var m_names = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
        var m_names = ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Jui', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Decembre'];
        var month = 0   // month = (new Date()).getMonth(); // for cuurent month
        for (var j = month; j <= 11; j++) { var months = m_names[0 + j]/*.slice(0, 3)*/; $('<option>', { value: (j + 1), text: months }).appendTo(".month"); }
        for (var i = minOffset; i <= maxOffset; i++) { var year = thisYear - i; $('<option>', { value: year, text: year }).appendTo(".year"); }

        $(document).ready(function () {
            //$('#yearSelect').val("0");

            $('#yearSelect').change(function () {
                selectVal = $(this).val(); //$('#yearSelect').val();

                if (selectVal == 0) {
                    $('#monthSelect').val('0');
                    $('#monthSelect').prop("disabled", true);
                    $('#btnAdd').attr('disabled', 'disabled');
                }
                else {
                    $('#monthSelect').prop("disabled", false);
                }
            });

            $('#monthSelect').change(function () {
                selectVal = $(this).val();  //$('#monthSelect').val();

                yearVal = $('#yearSelect').val();

                if (selectVal == 0 || yearVal == 0) {
                    //$('.btnAdd').prop("disabled", true);
                    $('#btnAdd').attr('disabled', 'disabled');
                }
                else {
                    //$('.btnAdd').prop("disabled", false);
                    $('#btnAdd').removeAttr('disabled');

                    $('#MOIS').val(selectVal + " " + yearVal);
                }
            });
        });

    </script>
}